{% include 'lapbul_app/header.html' %}
<style>
  /* Supaya kolom Aksi tetap kelihatan */
  .sticky-action-col {
    position: sticky;
    right: 0;
    background-color: rgba(255, 255, 255, 0.95) !important;
    z-index: 5;
    box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
    text-align: center;
    min-width: 80px;
  }
  /* Samakan tinggi label agar grid rapi (â‰ˆ 2 baris teks) */
  #form1600Modal .label-fixed {
    display: flex;
    align-items: flex-end;
    min-height: 2.8rem; /* sesuaikan bila perlu */
    margin-bottom: 0.25rem;
  }
</style>

<div id="layoutSidenav_content">
  <main>
    <div class="container-fluid px-4">
      <h5 class="mt-4">Form 1600 - Daftar Penyertaan Modal</h5>
      <hr />
      <div class="d-flex justify-content-between">
        <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary"
          >Kembali</a
        >
        <button
          type="button"
          class="btn btn-dark tambah"
          data-bs-toggle="modal"
          data-bs-target="#form1600Modal"
        >
          Tambah
        </button>
      </div>
      <br />

      <!-- Modal -->
      <div
        class="modal fade"
        id="form1600Modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="form1600ModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header bg-dark">
              <h6 class="modal-title text-white" id="form1600ModalLabel">
                Form Input Daftar Penyertaan Modal
              </h6>
              <button
                type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              <form id="form1600Form">
                <div class="row row-cols-1 row-cols-md-4 g-3">
                  <div class="col">
                    <label for="sandi_kantor" class="form-label label-fixed"
                      >Sandi Kantor</label
                    >
                    <input
                      type="text"
                      id="sandi_kantor"
                      name="sandi_kantor"
                      class="form-control"
                      maxlength="3"
                    />
                  </div>
                  <div class="col">
                    <label for="no_register" class="form-label label-fixed"
                      >No Register</label
                    >
                    <input
                      type="text"
                      id="no_register"
                      name="no_register"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="id_pihak" class="form-label label-fixed"
                      >ID Pihak Lawan</label
                    >
                    <input
                      type="text"
                      id="id_pihak"
                      name="id_pihak"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="metode" class="form-label label-fixed"
                      >Metode Penyertaan</label
                    >
                    <input
                      type="text"
                      id="metode"
                      name="metode"
                      class="form-control"
                    />
                  </div>

                  <div class="col">
                    <label for="kualitas" class="form-label label-fixed"
                      >Kualitas</label
                    >
                    <input
                      type="text"
                      id="kualitas"
                      name="kualitas"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="tujuan" class="form-label label-fixed"
                      >Tujuan Penyertaan</label
                    >
                    <input
                      type="text"
                      id="tujuan"
                      name="tujuan"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="tgl_mulai" class="form-label label-fixed"
                      >Tanggal Mulai</label
                    >
                    <input
                      type="date"
                      id="tgl_mulai"
                      name="tgl_mulai"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="persentase" class="form-label label-fixed"
                      >Persentase Penyertaan</label
                    >
                    <input
                      type="number"
                      step="0.01"
                      id="persentase"
                      name="persentase"
                      class="form-control"
                    />
                  </div>

                  <div class="col">
                    <label for="nominal" class="form-label label-fixed"
                      >Nominal</label
                    >
                    <input
                      type="number"
                      id="nominal"
                      name="nominal"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="bulan_laporan" class="form-label label-fixed"
                      >Jumlah Bulan Laporan</label
                    >
                    <input
                      type="number"
                      id="bulan_laporan"
                      name="bulan_laporan"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="ckpn" class="form-label label-fixed"
                      >CKPN</label
                    >
                    <input
                      type="number"
                      id="ckpn"
                      name="ckpn"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="ckpn_baik" class="form-label label-fixed"
                      >CKPN Aset Baik</label
                    >
                    <input
                      type="number"
                      id="ckpn_baik"
                      name="ckpn_baik"
                      class="form-control"
                    />
                  </div>

                  <div class="col">
                    <label for="ckpn_kurang" class="form-label label-fixed"
                      >CKPN Aset Kurang Baik</label
                    >
                    <input
                      type="number"
                      id="ckpn_kurang"
                      name="ckpn_kurang"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="ckpn_tidak" class="form-label label-fixed"
                      >CKPN Aset Tidak Baik</label
                    >
                    <input
                      type="number"
                      id="ckpn_tidak"
                      name="ckpn_tidak"
                      class="form-control"
                    />
                  </div>
                  <div class="col">
                    <label for="jenis_ckpn" class="form-label label-fixed"
                      >Jenis CKPN</label
                    >
                    <input
                      type="text"
                      id="jenis_ckpn"
                      name="jenis_ckpn"
                      class="form-control"
                    />
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Tutup
              </button>
              <button type="button" class="btn btn-dark simpan">Simpan</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabel (tidak diubah) -->
      <div class="table-responsive">
        <table
          id="datatables"
          class="table table-bordered table-striped nowrap w-100"
        >
          <thead class="text-center">
            <tr>
              <th>Sandi Kantor</th>
              <th>No Register</th>
              <th>ID Pihak Lawan</th>
              <th>Metode Penyertaan</th>
              <th>Kualitas</th>
              <th>Tujuan Penyertaan</th>
              <th>Tanggal Mulai</th>
              <th>Persentase Penyertaan</th>
              <th>Nominal</th>
              <th>Jumlah Bulan Laporan</th>
              <th>CKPN</th>
              <th>CKPN Aset Baik</th>
              <th>CKPN Aset Kurang Baik</th>
              <th>CKPN Aset Tidak Baik</th>
              <th>Jenis CKPN</th>
              <th class="sticky-action-col">Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>001</td>
              <td>1</td>
              <td>1</td>
              <td>Biaya Perolehan</td>
              <td>Lancar</td>
              <td>Lancar</td>
              <td>2024-05-05</td>
              <td>70.00</td>
              <td>10000</td>
              <td>1</td>
              <td>1000</td>
              <td>1000</td>
              <td>1000</td>
              <td>1000</td>
              <td>Lancar</td>
              <td class="sticky-action-col">
                <a href="#" class="text-danger delete"
                  ><i class="fas fa-trash-alt"></i
                ></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>

<script>
  $(document).ready(function () {
    $("#datatables").DataTable({
      scrollX: true,
      responsive: true,
      columnDefs: [{ targets: -1, orderable: false, width: "80px" }],
      language: {
        decimal: "",
        emptyTable: "Tidak ada data tersedia",
        info: "Menampilkan _START_ sampai _END_ dari _TOTAL_ data",
        infoEmpty: "Menampilkan 0 sampai 0 dari 0 data",
        infoFiltered: "(difilter dari total _MAX_ data)",
        lengthMenu: "Tampilkan _MENU_ data",
        loadingRecords: "Memuat...",
        processing: "Memproses...",
        search: "Cari:",
        zeroRecords: "Tidak ditemukan data yang sesuai",
        paginate: {
          first: "Pertama",
          last: "Terakhir",
          next: "Berikutnya",
          previous: "Sebelumnya",
        },
      },
    });
  });

  // Event tombol
  document.addEventListener("click", function (e) {
    if (e.target.closest(".tambah")) {
      const form = document.querySelector("#form1600Form");
      if (form) form.reset();
    }
    if (e.target.closest(".delete")) {
      const row = e.target.closest("tr");
      if (confirm("Yakin ingin menghapus data ini?")) row.remove();
    }
  });
</script>

{% include 'lapbul_app/footer.html' %}
