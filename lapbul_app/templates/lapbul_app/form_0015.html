{% include 'lapbul_app/header.html' %}
<style>
    /* CSS for form alignment and styling */
    .form-container {
        display: flex;
        justify-content: center;
    }
    .table-responsive {
        max-width: 800px;
        margin: 0 auto;
    }
    table td input.form-control {
        text-align: right;
    }
    .form-select.w-auto {
        max-width: fit-content;
    }
    table th:nth-child(2),
    table td:nth-child(2) {
        width: 150px;
        min-width: 150px;
    }
</style>

<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid px-4">
            <h5 class="mt-4">Form 0015 - Rincian Transaksi Terkait Penilaian Risiko TPPU, TPPT, dan PPSPM</h5>
            <hr>
            <div class="d-flex justify-content-between">
                <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary">Kembali</a>
                <button type="submit" form="mainForm" class="btn btn-secondary">Simpan</button>
            </div>
            <br>

            <!-- <div class="mb-3 d-flex align-items-center gap-2">
                <label for="sandiFilter" class="form-label mb-0">Pilih Sandi:</label>
                <select id="sandiFilter" class="form-select form-select-sm w-auto" onchange="filterSandi()">
                    <option value="all">semua</option>
                    <option value="5100">5100</option>
                    <option value="5110">5110</option>
                    <option value="5111">5111</option>
                    <option value="5112">5112</option>
                    <option value="5120">5120</option>
                    <option value="5200">5200</option>
                    <option value="5210">5210</option>
                    <option value="5211">5211</option>
                    <option value="5212">5212</option>
                    <option value="5220">5220</option>
                    <option value="5000">5000</option>
                </select>
            </div> -->

            <div class="form-container">
                <form id="mainForm">
                    <table class="table table-bordered table-sm">
                        <thead class="table-light text-center">
                            <tr>
                                <th>Jenis Nasabah</th>
                                <th>Sandi</th>
                                <th>Nominal</th>
                                <th>Jumlah Transaksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-sandi="5100">
                                <td>1. Transaksi melalui Jaringan Distribusi Tatap Muka</td>
                                <td class="text-center">5100</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5100" value="6000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5100" value="6000"></td>
                            </tr>
                            <tr data-sandi="5110">
                                <td>1.1 Melibatkan Perpindahan Dana</td>
                                <td class="text-center">5110</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5110" value="3000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5110" value="3000"></td>
                            </tr>
                            <tr data-sandi="5111">
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;a. Dana Masuk</td>
                                <td class="text-center">5111</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5111" value="1000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5111" value="1000"></td>
                            </tr>
                            <tr data-sandi="5112">
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;b. Dana Keluar</td>
                                <td class="text-center">5112</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5112" value="2000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5112" value="2000"></td>
                            </tr>
                            <tr data-sandi="5120">
                                <td>1.2 Tidak melibatkan Perpindahan Dana</td>
                                <td class="text-center">5120</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5120" value="3000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5120" value="3000"></td>
                            </tr>
                            <tr data-sandi="5200">
                                <td>2. Transaksi melalui Jaringan Distribusi Nontatap Muka</td>
                                <td class="text-center">5200</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5200" value="15000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5200" value="15000"></td>
                            </tr>
                            <tr data-sandi="5210">
                                <td>2.1 Melibatkan Perpindahan Dana</td>
                                <td class="text-center">5210</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5210" value="9000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5210" value="9000"></td>
                            </tr>
                            <tr data-sandi="5211">
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;a. Dana Masuk</td>
                                <td class="text-center">5211</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5211" value="4000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5211" value="4000"></td>
                            </tr>
                            <tr data-sandi="5212">
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;b. Dana Keluar</td>
                                <td class="text-center">5212</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5212" value="5000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5212" value="5000"></td>
                            </tr>
                            <tr data-sandi="5220">
                                <td>2.2 Tidak melibatkan Perpindahan Dana</td>
                                <td class="text-center">5220</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5220" value="6000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5220" value="6000"></td>
                            </tr>
                            <tr data-sandi="5000">
                                <td>Total Transaksi</td>
                                <td class="text-center">5000</td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="nominal_5000" value="21000"></td>
                                <td><input type="text" class="form-control form-control-sm number-input" name="transaksi_5000" value="21000"></td>
                            </tr>
                        </tbody>
                    </table>
                </form>
            </div>
            </div>
    </main>
</div>

<script>
    // Function to filter table rows based on selected "Sandi"
    function filterSandi() {
        var selected = document.getElementById("sandiFilter").value;
        var rows = document.querySelectorAll("tbody tr");

        rows.forEach(function(row) {
            if (selected === "all") {
                row.style.display = "";
            } else {
                if (row.getAttribute("data-sandi") === selected) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });
    }

    // Function to format numbers with thousand separators
    function formatNumber(input) {
        let value = input.value.replace(/\D/g, '');
        if (value) {
            input.value = new Intl.NumberFormat('id-ID').format(value);
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Apply initial formatting to all number-input fields
        document.querySelectorAll('.number-input').forEach(input => {
            formatNumber(input);

            // Add event listeners for formatting on blur and de-formatting on focus
            input.addEventListener('blur', function() {
                formatNumber(this);
            });
            input.addEventListener('focus', function() {
                this.value = this.value.replace(/\D/g, '');
            });
        });
    });
</script>
{% include 'lapbul_app/footer.html' %}