{% include 'lapbul_app/header.html' %}
<style>
    /* CSS for form alignment and styling */
    .form-container {
        display: flex;
        justify-content: center;
    }
    .table-responsive {
        margin: 0 auto;
    }
    table td input.form-control {
        text-align: right;
    }
    .form-select.w-auto {
        max-width: fit-content;
    }
</style>

<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid px-4">
            <h5 class="mt-4">Form 0300 - Daftar Kas Valuta Asing</h5>
            <hr>
            <div class="d-flex justify-content-between">
                <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary">Kembali</a>
                <button type="submit" form="mainForm" class="btn btn-secondary">Simpan</button>
            </div>
            <br>
            <!-- <div class="mb-3 d-flex align-items-center gap-2">
                <label for="sandiFilter" class="form-label mb-0">Pilih Sandi:</label>
                <select id="sandiFilter" class="form-select form-select-sm w-auto" onchange="filterSandi()">
                    <option value="all">semua</option>
                    <option value="USD">USD</option>
                    <option value="KRW">KRW</option>
                    <option value="INR">INR</option>
                </select>
            </div> -->

            <div class="mb-3 d-flex align-items-center gap-2">
                <label for="kantorFilter" class="form-label mb-0">Pilih Sandi Kantor:</label>
                <select id="kantorFilter" class="form-select form-select-sm w-auto" onchange="filterKantor()">
                    <option value="all">semua</option>
                    <option value="001">001</option>
                    <option value="002">002</option>
                </select>
            </div>
            
            <div class="form-container">
                <form id="mainForm">
                    <table class="table table-bordered table-sm">
                <thead class="table-light">
                    <tr>
                        <th>Flag Detail</th>
                        <th>Sandi Kantor</th>
                        <th>Jenis Valas</th>
                        <th>Nominal</th>
                        <th>Kurs Tengah (Rp)</th>
                        <th>Nilai Rupiah</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sandi Kantor 001 -->
                    <tr data-kantor="001">
                        <td>D01</td>
                        <td>001</td>
                        <td>USD (US Dollar)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_001_usd" value="200.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_001_usd" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_001_usd" value="2000000"></td>
                    </tr>
                    <tr data-kantor="001">
                        <td>D01</td>
                        <td>001</td>
                        <td>KRW (Korean Won)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_001_krw" value="200.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_001_krw" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_001_krw" value="2000000"></td>
                    </tr>
                    <tr data-kantor="001">
                        <td>D01</td>
                        <td>001</td>
                        <td>INR (Indian Rupee)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_001_inr" value="200.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_001_inr" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_001_inr" value="2000000"></td>
                    </tr>
                    <tr data-kantor="001">
                        <td>D01</td>
                        <td>001</td>
                        <td>HKD (Hong Kong Dollar)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_001_hkd" value="200.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_001_hkd" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_001_hkd" value="2000000"></td>
                    </tr>
                    <tr data-kantor="001">
                        <td>D01</td>
                        <td>001</td>
                        <td>JPY (Japanese Yen)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_001_jpy" value="200.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_001_jpy" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_001_jpy" value="2000000"></td>
                    </tr>
                    
                    <!-- Sandi Kantor 002 -->
                    <tr data-kantor="002">
                        <td>D01</td>
                        <td>002</td>
                        <td>KRW (Korean Won)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_002_krw" value="185.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_002_krw" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_002_krw" value="1850000"></td>
                    </tr>
                    <tr data-kantor="002">
                        <td>D01</td>
                        <td>002</td>
                        <td>INR (Indian Rupee)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_002_inr" value="185.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_002_inr" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_002_inr" value="1850000"></td>
                    </tr>
                    <tr data-kantor="002">
                        <td>D01</td>
                        <td>002</td>
                        <td>HKD (Hong Kong Dollar)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_002_hkd" value="185.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_002_hkd" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_002_hkd" value="1850000"></td>
                    </tr>
                    <tr data-kantor="002">
                        <td>D01</td>
                        <td>002</td>
                        <td>JPY (Japanese Yen)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_002_jpy" value="185.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_002_jpy" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_002_jpy" value="1850000"></td>
                    </tr>
                    <tr data-kantor="002">
                        <td>D01</td>
                        <td>002</td>
                        <td>IDR (Indonesian Rupiah)</td>
                        <td><input type="text" class="form-control form-control-sm" name="nominal_002_idr" value="185.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="kurs_002_idr" value="10000.00"></td>
                        <td><input type="text" class="form-control form-control-sm" name="rupiah_002_idr" value="1850000"></td>
                    </tr>
                </tbody>
                    </table>
                </form>
            </div>
        </div>
    </main>
</div>

<script>\n    // Function to format numbers with thousand separators\n    function formatNumber(input) {\n        let value = input.value.replace(/\\D/g, '');\n        if (value) {\n            input.value = new Intl.NumberFormat('id-ID').format(value);\n        }\n    }\n\n    document.addEventListener('DOMContentLoaded', function() {\n        // Apply initial formatting to all number-input fields\n        document.querySelectorAll('input[type=\"text\"]').forEach(input => {\n            if (input.name && (input.name.includes('nominal') || input.name.includes('kurs') || input.name.includes('rupiah'))) {\n                input.classList.add('number-input');\n                formatNumber(input);\n                \n                input.addEventListener('blur', function() {\n                    formatNumber(this);\n                });\n                input.addEventListener('focus', function() {\n                    this.value = this.value.replace(/\\D/g, '');\n                });\n            }\n        });\n    });\n\n
function filterKantor() {
    var selected = document.getElementById("kantorFilter").value;
    var rows = document.querySelectorAll("tbody tr");

    rows.forEach(function(row) {
        if (selected === "all") {
            row.style.display = "";
        } else {
            if (row.getAttribute("data-kantor") === selected) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        }
    });
}
</script>
{% include 'lapbul_app/footer.html' %}