{% include 'lapbul_app/header.html' %}
<div id="layoutSidenav_content">
  <main>
    <div class="container-fluid px-4">
      <h5 class="mt-4">Form 1401 - Rincian Liabilitas Lainnya Lain-Lain</h5>
      <hr />

      <!-- Tombol kembali & tambah -->
      <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary"
        >Kembali</a
      >
      <button
        type="button"
        class="btn btn-secondary tambah"
        data-bs-toggle="modal"
        data-bs-target="#form1401Modal"
      >
        Tambah</button
      ><br /><br />

      <!-- Modal -->
      <div
        class="modal fade"
        id="form1401Modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="form1401ModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header bg-secondary">
              <h6 class="modal-title text-white" id="form1401ModalLabel">
                Form Data Liabilitas Lainnya Lain-Lain
              </h6>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label class="form-label">Sandi Kantor</label>
                    <input
                      type="text"
                      class="form-control"
                      id="sandi_kantor"
                      maxlength="3"
                    />
                  </div>
                  <div class="col-md-5 mb-3">
                    <label class="form-label">Uraian</label>
                    <input type="text" class="form-control" id="uraian" />
                  </div>
                  <div class="col-md-3 mb-3">
                    <label class="form-label">Jumlah</label>
                    <input type="text" class="form-control" id="jumlah" />
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Tutup
              </button>
              <button type="button" class="btn btn-secondary">
                Simpan Perubahan
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabel -->
      <table
        id="datatables"
        class="table table-bordered table-striped nowrap w-100"
      >
        <thead>
          <tr>
            <th>Sandi Kantor</th>
            <th>Uraian</th>
            <th>Jumlah</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td>
              <a
                href="#"
                class="text-secondary me-2 edit"
                data-bs-toggle="modal"
                data-bs-target="#form1401Modal"
                ><i class="fas fa-edit"></i
              ></a>
              <a href="#" class="text-danger delete"
                ><i class="fas fa-trash-alt"></i
              ></a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</div>

<script>
  $(document).ready(function () {
    $("#datatables").DataTable({
      scrollX: true,
      responsive: true,
      pageLength: 15,
      lengthChange: false,
      language: {
        zeroRecords: "Tidak ada data yang ditemukan",
        info: "Menampilkan _START_ sampai _END_ dari _TOTAL_ entri",
        infoEmpty: "Menampilkan 0 sampai 0 dari 0 entri",
        infoFiltered: "(difilter dari total _MAX_ entri)",
        search: "Cari:",
        paginate: {
          first: "Pertama",
          last: "Terakhir",
          next: "Berikutnya",
          previous: "Sebelumnya",
        },
      },
    });
  });

  document.addEventListener("click", function (e) {
    if (e.target.closest(".tambah")) {
      e.preventDefault();
      const form = document.querySelector("#form1401Modal form");
      form.reset();
    }

    if (e.target.closest(".edit")) {
      e.preventDefault();
      const row = e.target.closest("tr");
      const cells = row.querySelectorAll("td");

      document.getElementById("sandi_kantor").value = cells[0].textContent;
      document.getElementById("uraian").value = cells[1].textContent;
      document.getElementById("jumlah").value = cells[2].textContent;
    }

    if (e.target.closest(".delete")) {
      e.preventDefault();
      const row = e.target.closest("tr");
      const confirmDelete = confirm(
        "Apakah Anda yakin ingin menghapus data ini?"
      );
      if (confirmDelete) {
        row.remove();
      }
    }
  });
</script>
{% include 'lapbul_app/footer.html' %}
