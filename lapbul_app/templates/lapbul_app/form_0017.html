{% include 'lapbul_app/header.html' %}
<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid px-4">
            <h5 class="mt-4">Form 0017 - Laporan Perubahan Ekuitas</h5>
            <hr>
            <!-- Button to trigger modal -->
            <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary">Kembali</a>
            <button type="button" class="btn btn-secondary tambah" data-bs-toggle="modal" data-bs-target="#form0017Modal">Tambah</button><br><br>
            
            <!-- Modal structure -->
            <div class="modal fade" id="form0017Modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="form0017ModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                    
                        <div class="modal-header bg-secondary">
                            <h6 class="modal-title text-white" id="form0017ModalLabel">Form Input Laporan Perubahan Ekuitas</h6>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <div class="modal-body">
                            <!-- Input Form -->
                            <form>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="pos" class="form-label">Pos</label>
                                        <input type="text" class="form-control" id="pos" name="pos">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="sandi_pos" class="form-label">Sandi Pos</label>
                                        <input type="text" class="form-control" id="sandi_pos" name="sandi_pos">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="modal_disetor" class="form-label">Modal Disetor</label>
                                        <input type="number" class="form-control" id="modal_disetor" name="modal_disetor">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="tambahan_modal" class="form-label">Tambahan Modal</label>
                                        <input type="number" class="form-control" id="tambahan_modal" name="tambahan_modal">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="modal_sumbangan" class="form-label">Modal Sumbangan</label>
                                        <input type="number" class="form-control" id="modal_sumbangan" name="modal_sumbangan">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="dsm_ekuitas" class="form-label">DSM Ekuitas</label>
                                        <input type="number" class="form-control" id="dsm_ekuitas" name="dsm_ekuitas">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="laba_rugi_belum_direalisasi" class="form-label">Laba/Rugi Yang Belum Direalisasi</label>
                                        <input type="number" class="form-control" id="laba_rugi_belum_direalisasi" name="laba_rugi_belum_direalisasi">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="surplus_revaluasi" class="form-label">Surplus Revaluasi Aset Tetap</label>
                                        <input type="number" class="form-control" id="surplus_revaluasi" name="surplus_revaluasi">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="cadangan_tujuan" class="form-label">Cadangan Tujuan</label>
                                        <input type="number" class="form-control" id="cadangan_tujuan" name="cadangan_tujuan">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="cadangan_umum" class="form-label">Cadangan Umum</label>
                                        <input type="number" class="form-control" id="cadangan_umum" name="cadangan_umum">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="saldo_laba" class="form-label">Saldo Laba Belum Ditentukan Penggunaannya</label>
                                        <input type="number" class="form-control" id="saldo_laba" name="saldo_laba">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="jumlah" class="form-label">Jumlah</label>
                                        <input type="number" class="form-control" id="jumlah" name="jumlah">
                                    </div>
                                </div>
                            </form>
                            <!-- End Input Form -->
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-secondary">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Table -->
            <table id="datatables" class="table table-bordered table-striped nowrap w-100">
                <thead>
                    <tr>
                        <th>Pos</th>
                        <th>Sandi Pos</th>
                        <th>Modal Disetor</th>
                        <th>Tambahan Modal</th>
                        <th>Modal Sumbangan</th>
                        <th>DSM Ekuitas</th>
                        <th>Laba/Rugi Belum Direalisasi</th>
                        <th>Surplus Revaluasi Aset Tetap</th>
                        <th>Cadangan Tujuan</th>
                        <th>Cadangan Umum</th>
                        <th>Saldo Laba Belum Ditentukan</th>
                        <th>Jumlah</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Example rows for Laporan Perubahan Ekuitas -->
                    <tr>
                        <td>Modal Disetor</td>
                        <td>10000000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>18000</td>
                        <td>
                            <a href="#" class="text-secondary me-2 edit" data-bs-toggle="modal" data-bs-target="#form0017Modal"><i class="fas fa-edit"></i></a>
                            <a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>Tambahan Modal Disetor</td>
                        <td>10100000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>18000</td>
                        <td>
                            <a href="#" class="text-secondary me-2 edit" data-bs-toggle="modal" data-bs-target="#form0017Modal"><i class="fas fa-edit"></i></a>
                            <a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>Cadangan Umum</td>
                        <td>10200000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>18000</td>
                        <td>
                            <a href="#" class="text-secondary me-2 edit" data-bs-toggle="modal" data-bs-target="#form0017Modal"><i class="fas fa-edit"></i></a>
                            <a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>Cadangan Tujuan</td>
                        <td>10300000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>18000</td>
                        <td>
                            <a href="#" class="text-secondary me-2 edit" data-bs-toggle="modal" data-bs-target="#form0017Modal"><i class="fas fa-edit"></i></a>
                            <a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                    <tr>
                        <td>Laba Ditahan</td>
                        <td>10400000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>2000</td>
                        <td>18000</td>
                        <td>
                            <a href="#" class="text-secondary me-2 edit" data-bs-toggle="modal" data-bs-target="#form0017Modal"><i class="fas fa-edit"></i></a>
                            <a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- Table -->
        </div>
    </main>
</div>

<script>
$(document).ready(function () {
    $('#datatables').DataTable({
        scrollX: true,
        responsive: true
    });
});

document.addEventListener('click', function(e) {
    if (e.target.closest('.tambah')) {
        e.preventDefault();
        const form = document.querySelector('#form0017Modal form');
        form.reset();
    }

    if (e.target.closest('.edit')) {
        e.preventDefault();
        const row = e.target.closest('tr');
        const cells = row.querySelectorAll('td');

        // Fill modal form
        document.getElementById("pos").value = cells[0].textContent.trim();
        document.getElementById("sandi_pos").value = cells[1].textContent.trim();
        document.getElementById("modal_disetor").value = cells[2].textContent.trim();
        document.getElementById("tambahan_modal").value = cells[3].textContent.trim();
        document.getElementById("modal_sumbangan").value = cells[4].textContent.trim();
        document.getElementById("dsm_ekuitas").value = cells[5].textContent.trim();
        document.getElementById("laba_rugi_belum_direalisasi").value = cells[6].textContent.trim();
        document.getElementById("surplus_revaluasi").value = cells[7].textContent.trim();
        document.getElementById("cadangan_tujuan").value = cells[8].textContent.trim();
        document.getElementById("cadangan_umum").value = cells[9].textContent.trim();
        document.getElementById("saldo_laba").value = cells[10].textContent.trim();
        document.getElementById("jumlah").value = cells[11].textContent.trim();
    }

    if (e.target.closest('.delete')) {
        e.preventDefault();
        const row = e.target.closest('tr');
        if (confirm("Apakah Anda yakin ingin menghapus data ini?")) {
            row.remove();
        }
    }
});
</script>
{% include 'lapbul_app/footer.html' %}