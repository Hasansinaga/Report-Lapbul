{% include 'lapbul_app/header.html' %}
<div id="layoutSidenav_content">
  <main>
    <div class="container-fluid px-4">
      <h5 class="mt-4">Form 1700 - Daftar Penyertaan Modal Lainnya</h5>
      <hr />
      <div class="d-flex justify-content-between">
        <a href="{% url 'lapbul_app:lapbul' %}" class="btn btn-secondary"
          >Kembali</a
        >
        <button
          type="button"
          class="btn btn-dark"
          data-bs-toggle="modal"
          data-bs-target="#form1700Modal"
        >
          Tambah
        </button>
      </div>
      <br />

      <!-- Modal Input -->
      <div
        class="modal fade"
        id="form1700Modal"
        tabindex="-1"
        aria-labelledby="form1700ModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header bg-dark">
              <h6 class="modal-title text-white" id="form1700ModalLabel">
                Form Input Daftar Penyertaan Modal Lainnya
              </h6>
              <button
                type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="modal"
              ></button>
            </div>
            <div class="modal-body">
              <form id="form1700Form">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="sandi_kantor" class="form-label"
                      >Sandi Kantor</label
                    >
                    <input
                      type="text"
                      id="sandi_kantor"
                      name="sandi_kantor"
                      class="form-control"
                      maxlength="3"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="no_register" class="form-label"
                      >No Register</label
                    >
                    <input
                      type="text"
                      id="no_register"
                      name="no_register"
                      class="form-control"
                    />
                  </div>

                  <div class="col-md-6">
                    <label for="jenis_properti" class="form-label"
                      >Jenis Properti Terbengkalai</label
                    >
                    <input
                      type="text"
                      id="jenis_properti"
                      name="jenis_properti"
                      class="form-control"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="alamat_properti" class="form-label"
                      >Alamat Properti Terbengkalai</label
                    >
                    <input
                      type="text"
                      id="alamat_properti"
                      name="alamat_properti"
                      class="form-control"
                    />
                  </div>

                  <div class="col-md-6">
                    <label for="koordinat" class="form-label"
                      >Koordinat Kantor</label
                    >
                    <input
                      type="text"
                      id="koordinat"
                      name="koordinat"
                      class="form-control"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="tgl_penetapan" class="form-label"
                      >Tanggal Penetapan Properti</label
                    >
                    <input
                      type="date"
                      id="tgl_penetapan"
                      name="tgl_penetapan"
                      class="form-control"
                    />
                  </div>

                  <div class="col-md-6">
                    <label for="biaya_perolehan" class="form-label"
                      >Biaya Perolehan / Nilai Wajar</label
                    >
                    <input
                      type="number"
                      id="biaya_perolehan"
                      name="biaya_perolehan"
                      class="form-control"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="akumulasi" class="form-label"
                      >Akumulasi Penyusutan / Amortisasi</label
                    >
                    <input
                      type="number"
                      id="akumulasi"
                      name="akumulasi"
                      class="form-control"
                    />
                  </div>

                  <div class="col-md-6">
                    <label for="jumlah" class="form-label">Jumlah</label>
                    <input
                      type="number"
                      id="jumlah"
                      name="jumlah"
                      class="form-control"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="metode_pengukuran" class="form-label"
                      >Metode Pengukuran</label
                    >
                    <input
                      type="text"
                      id="metode_pengukuran"
                      name="metode_pengukuran"
                      class="form-control"
                    />
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Tutup
              </button>
              <button type="button" class="btn btn-dark simpan">Simpan</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="table-responsive">
        <table
          id="datatables1700"
          class="table table-bordered table-striped nowrap w-100"
        >
          <thead class="text-center align-middle">
            <tr>
              <th>Sandi Kantor</th>
              <th>No Register</th>
              <th>Jenis Properti Terbengkalai</th>
              <th>Alamat Properti Terbengkalai</th>
              <th>Koordinat Kantor</th>
              <th>Tanggal Penetapan</th>
              <th>Biaya Perolehan / Nilai Wajar</th>
              <th>Akumulasi Penyusutan / Amortisasi</th>
              <th>Jumlah</th>
              <th>Metode Pengukuran</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>001</td>
              <td>NoRegis1</td>
              <td>Tanah</td>
              <td>Jakarta</td>
              <td>-</td>
              <td>2024-06-06</td>
              <td>100000</td>
              <td>10000</td>
              <td>9000</td>
              <td>Model Biaya</td>
              <td class="text-center">
                <a href="#" class="text-danger delete"
                  ><i class="fas fa-trash-alt"></i
                ></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <script>
        $(document).ready(function () {
          let table = $("#datatables1700").DataTable({
            scrollX: true,
            responsive: true,
            columnDefs: [{ targets: -1, orderable: false, width: "80px" }],
            language: {
              decimal: "",
              emptyTable: "Tidak ada data tersedia",
              info: "Menampilkan _START_ sampai _END_ dari _TOTAL_ data",
              infoEmpty: "Menampilkan 0 sampai 0 dari 0 data",
              infoFiltered: "(difilter dari total _MAX_ data)",
              lengthMenu: "Tampilkan _MENU_ data",
              loadingRecords: "Memuat...",
              processing: "Memproses...",
              search: "Cari:",
              zeroRecords: "Tidak ditemukan data yang sesuai",
              paginate: {
                first: "Pertama",
                last: "Terakhir",
                next: "Berikutnya",
                previous: "Sebelumnya",
              },
            },
          });

          // Tambah data dari modal
          $(".simpan").on("click", function () {
            let data = {
              sandi: $("#sandi_kantor").val(),
              noReg: $("#no_register").val(),
              jenis: $("#jenis_properti").val(),
              alamat: $("#alamat_properti").val(),
              koordinat: $("#koordinat").val(),
              tgl: $("#tgl_penetapan").val(),
              biaya: $("#biaya_perolehan").val(),
              akumulasi: $("#akumulasi").val(),
              jumlah: $("#jumlah").val(),
              metode: $("#metode_pengukuran").val(),
            };

            table.row
              .add([
                data.sandi,
                data.noReg,
                data.jenis,
                data.alamat,
                data.koordinat,
                data.tgl,
                data.biaya,
                data.akumulasi,
                data.jumlah,
                data.metode,
                `<a href="#" class="text-danger delete"><i class="fas fa-trash-alt"></i></a>`,
              ])
              .draw();

            $("#form1700Form")[0].reset();
            $("#form1700Modal").modal("hide");
          });

          // Hapus data
          $("#datatables1700 tbody").on("click", ".delete", function () {
            if (confirm("Yakin ingin menghapus data ini?")) {
              table.row($(this).parents("tr")).remove().draw();
            }
          });
        });
      </script>

      {% include 'lapbul_app/footer.html' %}
    </div>
  </main>
</div>
